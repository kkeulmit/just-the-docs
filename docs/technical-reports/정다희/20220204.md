---
layout: default
title: 220204_What is Docker
parent: Technical Report
nav_order: 2
---

#### 1. 도커란 무엇일까 ?
- 도커의 이미지가 왜 귀여운 고래 위에 컨테이너가 쌓여있는지가 궁금했다. 공부하고 나니 핵심 기능을 이미지화 했다는 생각이 든다.
- 도커는 애플리케이션을 신속하게 구축, 테스트 및 배포 할 수 있는 소프트웨어 플랫폼이다.
- 소프트웨어를 컨테이너 라는 표준화된 유닛으로 패키징하며, 컨테이너는 라이브러리, 시스템 도구, 코드 등 실행에 필요한 모든 것이 포함 되어 있다.
- 즉  도커는 독립적으로 애플리케이션을 실행할 수 있도록 컨테이너를 만들고 관리하는 것을 도와주는 도구이다.
- 도커를 통해 애플리케이션을 실행하면 독립적인 환경에서 일관된 결과를 보장한다.

#### 2. 컨테이너
- 컨테이너는 격리된 공간에서 프로세스가 동작하는 기술이다.
- 단순히 프로세스를 격리하기 때문에 가볍고 빠르다. 또한 CPU , 메모리는 프로세스가 필요한 만큼만 추가 사용해서 성능적으로 거의 손실이 없다.
- 아래는 도커(왼쪽)와 가상머신(오른쪽) 을 나타낸 그림이다.
![스크린샷 2022-02-19 19 44 25](https://user-images.githubusercontent.com/75294638/154797594-673ae8dc-a7ad-404b-b096-a95e20050995.png)


- 컨테이너는 다음과 같은 특징이 있다.
##### 서버에 여러 컨테이너를 실행하면 독립적으로 실행되어 Virtual Machine 을 사용하는 느낌을 준다.
##### 실행중인 컨테이너에 접속하여 명령어를 내릴 수 있다. 
##### `apt-get`, `yum` 등 운영체제에서 사용하는 패키지 매니저를 통해 설치 할 수 있고 사용자도 추가하고 프로세스를 백그라운드로 실행할 수 있다.
##### CPU 나 메모리 사용량을 제한할 수 있다.
##### 호스트의 특정 포트와 연결하거나 호스트의 특정 디렉토리를 내부 디렉토리 인것 처럼 사용 가능하다
##### 새로운 컨테이너를 만드는것은 1-2초밖에 소요되지 않는다.

#### 3. 이미지
- 컨테이너 실행에 필요한 파일과 설정값들을 포함하고 있는 것으로 상태값을 가지지 않고 변하지 않는다.(Immutable)
- 컨테이너는 이미지를 실행한 상태라고 볼 수 있고 추가되거나 변하는 값은 컨테이너에 저장된다.
- 같은 이미지에서 여러개의 컨테이너를 생성할 수 있고 컨테이너의 상태가 바뀌거나 컨테이너가 삭제되더라도 컨테이너는 그대로 남아있다.

#### 4. 도커의 레이어 저장 방식
- 도커 이미지는 컨테이너를 실행하기 위한 모든 정보를 가지고 있기 때문에 보통 용량이 수백메가 정도 된다.
- 도커는 이미지 용량 문제를 해결하기 위해 레이어(layer) 개념을 사용하고 유니온 파일 시스템을 이용하여 여러개의 레이어를 하나의 파일 시스템으로 사용 할 수 있게 해준다.
- 컨테이너를 생성할 때도 레이어 방식을 사용하는데 기존의 이미지 레이어 위에 읽기/쓰기 레이어를 추가한다.
- 이미지 레이어를 그대로 사용하면서 컨테이너가 실행 중에 생성하는 파일이나 변경된 내용은 읽기/쓰기 레이어에 저장되므로 여러개의 컨테이너를 생성해도 최소한의 용량만 사용한다.

#### 5. Dockerfile
- 도커는 이미지를 만들기 위해 Dockerfile 이라는 파일에 자체 DSL(Domain-specific Language) 언어를 이용해서 이미지 생성 과정을 적는다. 
- 서버에 어떤 프로그램을 설치하려고 의존성 패키지를 설치하고 설정 파일을 만들었던 경험이 있다면 그 과정을 블로깅하거나 메모장에 적지말고 Dockerfile 로 관리하면 된다.
- 이 파일은 소스와 함께 버전 관리 되고 누구나 이미지 생성 과정을 보고 수정할 수 있다.

#### 6. 총평
- 도커는 완전히 새로운 기술이 아니며 이미 존재하는 기술을 잘 포장했다고 볼 수 있다.
- 기술을 잘 조합하고, 사용자들이 원하는 기능을 간단하지만 획기적인 아이디어로 구현하여 사용자가 많이 늘어난 것.
- 고래 이미지가 왕왕 귀엽다. 도커가 성공한 이유는 귀여운 고래 이미지 덕분이 아닐까.
- 함꼐 수료한 팀원들과 이번 배포는 도커로 해보자 했는데 직접 사용해보고 추가로 글을 써야겠다. 언제가 될지는 모르겠지만.